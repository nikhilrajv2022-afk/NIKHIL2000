{% extends "base.html" %}

{% block content %}
<div style="margin-bottom: 2rem;">
    <h1>Communication Center</h1>
    <p class="text-muted">Direct line to Admins and Teachers.</p>
</div>

<div class="card" style="max-width: 800px; margin: 0 auto; display: flex; flex-direction: column; height: 600px;">
    <!-- Chat Area -->
    <div
        style="flex-grow: 1; overflow-y: auto; padding: 1rem; background: #f1f5f9; border-radius: 8px; margin-bottom: 1rem; display: flex; flex-direction: column; gap: 1rem;">
        {% for msg in messages %}
        <div style="align-self: {{ 'flex-end' if msg.sender == 'You' else 'flex-start' }}; max-width: 70%;">
            <div
                style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.25rem; {{ 'text-align: right;' if msg.sender == 'You' else '' }}">
                {{ msg.sender }} â€¢ {{ msg.time }}
            </div>
            <div
                style="background: {{ 'var(--primary)' if msg.sender == 'You' else 'white' }}; color: {{ 'white' if msg.sender == 'You' else 'var(--text)' }}; padding: 0.75rem 1rem; border-radius: 12px; border-bottom-{{ 'right' if msg.sender == 'You' else 'left' }}-radius: 2px; box-shadow: var(--shadow-sm);">
                {{ msg.body }}
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Input Area -->
    <form method="POST" style="display: flex; gap: 1rem;">
        <input type="text" name="message" placeholder="Type your message..." required
            style="margin-bottom: 0; flex-grow: 1;">
        <button type="submit" class="btn btn-primary">Send</button>
    </form>
</div>
{% endblock %}